# 課題レポート7: 符号化されたメッセージの解読

- ＜目次＞
  - <a href="#abst">課題概要</a>
  - <a href="#howto">取り組み方</a>
  - <a href="#report">レポートに含める内容</a>
  - <a href="#level1">課題詳細</a>
  - <a href="#upload">提出方法</a>

<hr>

## <a name="abst">課題概要</a>
- あるルールに基づいて符号化されたメッセージを復号するプログラムを実装せよ。
  - 出典: [プログラマの考え方がおもしろいほど身につく本 問題解決能力を鍛えよう!](https://www.amazon.co.jp/プログラマの考え方がおもしろいほど身につく本-問題解決能力を鍛えよう-V-Anton-Spraul/dp/4048869558), 2.4節の例題をベースにしました。
    - タイトル通り「考え方」を勉強するには良書。コード例はC++で書かれている点に注意。

- 達成目標
  - プログラミング1の総復習。全体としては複雑に見えるが、整理・機能分割して取り組んでみよう。
    - リスト操作・数値演算に慣れよう。
    - 変数名、関数名、コメントの大切さに気付こう。
    - レポート4で読んだ[tic_tac_toe.py](https://github.com/naltoma/python_intro/blob/master/report/tic_tac_toe.py)を参考に、ドキュメント・ユニットテストを書いてみよう。
  - （Unicodeについて触れよう）　＊触れなくても解ける問題ですが、後述のヒントを使うと比較的シンプルに書けます。

<hr>

## <a name="howto">取り組み方</a>
- ペアや友人らと話し合って取り組んで構わないが、**自分自身の言葉で述べること。試して分かったこと、自身で解決できなかった部分等についてどう取り組んだか、といった過程がわかるように示すこと**。（考えを図表や文章を駆使して表現して報告する練習です）

<hr>

## <a name="report">レポートに含める内容</a>
- レポート作成は当面「googleドキュメント」を使うこと。
- レポートには下記を含めること。
  - **タイトル**
    - 今回は【プログラミング1、レポート課題7: 「符号化されたメッセージの解読」】。
  - **提出日**: yyyy-mm-dd
  - **報告者**: 学籍番号、氏名
    - 複数人で相談しながらやった場合、相談者らを「協力者: 学籍番号、氏名」として示そう。
  - **課題説明**
    - 1,2行程度で課題の内容を説明しよう。
  - **書いたコード**
  - **実行結果**
  - **考察**
    - 課題への取り組みを通し、課題の意義、課題から分かったこと、今後の展望などを述べる。失敗やつまづきがあれば、それらについての失敗分析を含めること。
  - 参考リンク: [実験レポートの書き方](http://www.report.gusoku.net/jikken/jikkenreport.html)
  - その他
    - 通常は感想等をレポートには含めませんが、練習なので課題に取り組みながら何か感じたこと、悩んでいること等、書きたいことがあれば自由に書いてください。（なければ省略OK）

<hr>

## <a name="level">課題詳細</a>
- 以下に示す仕様を満足しつつ、「実行イメージ」のように結果を出力するプログラムを書け。
- 仕様
  - あるメッセージが「カンマ区切りで整数を列挙した文字列」として符号化されている。例えば「13,12312,335」のように符号化された文字列を受け取るものとする。（具体例は後述）
  - 元のデータは「アルファベット小文字」「記号」のいずれかである。符号化された数値がどの文字を表しているのかは、現在の復号モードによって変わる。
    - アルファベット小文字モードでは、個々の数値がアルファベット小文字1文字を表す。数値を27で割った余り（1をaとする）がアルファベット小文字に対応する。
      - 例えば、数値が140ならば復号結果はeとなる。140を27で割った余りは5で、アルファベット5番目の文字はeだからである。
    - 記号モードでは、数値を9で割った余りを使い、以下の対応表に基づいて復号可能である。
      - 余り <-> 対応する記号
      - 1 <-> !
      - 2 <-> ?
      - 3 <-> ,
      - 4 <-> .
      - 5 <->  (半角スペース)
      - 6 <-> ;
      - 7 <-> "
      - 8 <-> '
        - 例えば、数値が13ならば復号結果は.となる。13を9で割ったあまりは4で、上記対応表によると記号.に対応しているからである。
  - メッセージが始まった時点の復号モードは「アルファベット小文字」モードである。剰余演算（モードにより27あるいは9のいずれかを使う）の結果が0になる度に、復号モードが切り替わる。
    - 現在のモードがアルファベット小文字モードならば、剰余演算結果が0になると、記号モードへ切り替わる。
    - 現在の記号モードならば、剰余演算結果が0になると、アルファベット小文字モードへ切り替わる。
- 復号の具体例
  - 入力:68,1,72,21,55,65,63,27,5,27,74,42,94,28
    - 1個目: 68 (アルファベットモード)
      - 余り14 -> n
    - 2個目: 1 (アルファベットモード)
      - 余り1 -> a
    - 3個目: 72 (アルファベットモード)
      - 余り18 -> r
    - 4個目: 21 (アルファベットモード)
      - 余り21 -> u
    - 5個目: 55 (アルファベットモード)
      - 余り1 -> a
    - 6個目: 65 (アルファベットモード)
      - 余り11 -> k
    - 7個目: 63 (アルファベットモード)
      - 余り9 -> i
    - 8個目: 27 (アルファベットモード)
      - 余り0 -> モード変更（対応文字なし）
    - 9個目: 5 (記号モード)
      - 余り5 ->  (半角スペース)
    - 10個目: 27 (アルファベットモード)
      - 余り0 -> モード変更 (対応文字なし)
    - 11個目: 74 (アルファベットモード)
      - 余り20 -> t
    - 12個目: 42 (アルファベットモード)
      - 余り15 -> o
    - 13個目: 94 (アルファベットモード)
      - 余り13 -> m
    - 14個目: 28 (アルファベットモード)
      - 余り1 -> a
  - 復号結果
    - 対応文字なしを無視して並べると「naruaki toma」になる。これが復号結果。
- 実装上の条件
  - 以下に示す関数の実装を含めること。下記以外にも関数を作成して構わない（むしろ推奨する）。
  - 関数名: decrypt_numbers
    - 引数: リスト（符号化された数値のシーケンス）
      - e.g., [68,1,72,21,55,65,63,27,5,27,74,42,94,28]
    - 戻り値: 文字列（復号化した結果）
      - e.g., 'naruaki toma'
  - 関数毎にdocstringドキュメントを書くこと。（参考: [tic_tac_toe.py](https://github.com/naltoma/python_intro/blob/master/report/tic_tac_toe.py)）
  - 最低1つの関数について、doctestを書くこと。
- 実行イメージ
  - 注意: 以下ではイメージしやすいようにインタプリタ上で実行していますが、インタプリタで作成しろという意味ではありません。スクリプトファイルとして実行できれば良いです。

```
>>> from report7 import *
>>> input = [68,1,72,21,55,65,63,27,5,27,74,42,94,28]
>>> result = decrypt_numbers(input)
>>> print(result)
naruaki toma
>>>
```

- ヒント（使わなくても書けるけど、使うと便利かもしれない情報）
  - [chr()](https://docs.python.org/3/library/functions.html#chr)
    - Unicodeのコードポイント（整数）を使って文字を表現できます。
      - 例えば ``chr(97)`` の戻り値は'a'です。
      - Unicodeについては例えば[Unicodeとは？ その歴史と進化、開発者向け基礎知識](http://www.buildinsider.net/language/csharpunicode/01)を眺めてみると良いかな。
  - [ord()](https://docs.python.org/3/library/functions.html#ord)
    - 文字に対応するコードポイントを確認できます。
      - 例えば ``ord('a')`` の戻り値は97です。
  - [str.join()](https://docs.python.jp/3/library/stdtypes.html#str.join)
    - シーケンス集合を指定した文字で結合した文字列を生成できます。
      - 例えば ``''.join(['a', 'b'])`` の戻り値は 'ab' です。
- その他
  - **使用して良いモジュールは、上記で示したもののみとする。**
  - スクリプトファイル名は「report7.py」とすること。
  - 引数・戻り値の設定に注意。例えば、引数として渡していないにも関わらず、関数内から外部の変数へアクセスするような書き方は減点対象。

<hr>

## <a name="upload">提出方法</a>
- 提出物は「レポート」、「作成したスクリプトファイル」の2点である。
  - もしそれ以外に作成したものがあるなら、それも提出しよう。
- レポートは電子ファイルで提出するものとする。
- 提出先＆〆切: 授業ページを参照。
